# Pre-setup #############################################################################

Dependencies (optionnal):
    You'll need python 3.8+ if you need to use the python scripts.

File Explorer:
    Unzip [AX_MMD] zipmod (or other) and use it as a base, or other method of making a blank zipmod.

Unity:
    Start with a KoikatsuModdingTools folder from github.
    Put `src/GeneratePrefabsFromWav.cs` in `Assets/Editor`.
    Put `src/SEComponent.cs` in `Assets/Scripts`.
    Top menu, GameObject->Create Empty.
    Rename object to `base_3dse`.
    In base_3dse -> Add Component -> SE Component (Script).
    Set attributes:
    - Sound Type = Game SE3D = 4
    - Is Loop = disabled = 0
    - Type = Logarithmic = 1
    - Rolloff Distance Min = 5
    - Rolloff Distance Max = 9
    - Volume = 1
    Drag and Drop `base_3dse` into `Assets/3DSE objects` (make that folder).
    Make a folder where you'll import your sound files, I like `Assets/3DSE sources`.

# Compilation ###########################################################################

File Explorer:
    Your sound file needs at least 50ms of silence before the sound plays to prevent the risk of random sound burst in KK.
    If it's too short or you're not sure, Drag & Drop folder with sound files on kk_sound_file_mod.py

Unity:
    Make a folder for the category of sound files.
    Drop sound files in to import to unity.
    Set attributes:
    - Decompress On Load
    - Preload Audio Data
    - Vorbis
    - Quality 100
    - Preserve Sample Rate 
    
    Modify `GetItemName` in `Assets/Editor/GeneratePrefabsFromWav.cs` so it can do one of these:
    - By default, will return the filename as is
    - Extract the number from the sound file name
    - Make a custom name, whatever you want
    IMPORTANT: Your `.prefab` file cannot have spaces or capital letters to be compatible with KK.
    
    In the Unity main window (NOT the directory tree on the left) Right-click folder with your audio and `Generate Prefabs From Wav`.
    Select all `.prefab` objects in `Assets/Mods/Prefab`.
    In bottom right `Asset Labels` menu, make New->studio\<mod_name>\<(optionnal)subfolders>/<compiled_assets_name> and select `unity3d`
    
    In Top menu, Window -> AssetBundle Browser -> Build tab
    Enable `Clear Folders` and disable `Compression`
    Press `Build Asset Bundles`
    
    Edit the ItemList.csv file to add the new sound items
    Put the updated ItemList.csv in the [AX_MMD] zipmod base
    Transfert the compiled `.unity3d` from `Build/abdata/...` into the [AX_MMD] base
    Zip the [AX_MMD] base with Bandizip (or other) using compression = 0 and filename = [AX_MMD] ... .zipmod
    
